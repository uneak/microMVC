/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

!function(n,e){"function"==typeof define&&define.amd?define([],e):n.micromvc=e()}(this,function(){var n,e,t;return function(r){function i(n,e){return y.call(n,e)}function o(n,e){var t,r,i,o,s,u,c,f,l,p,a,d=e&&e.split("/"),h=g.map,b=h&&h["*"]||{};if(n&&"."===n.charAt(0))if(e){for(n=n.split("/"),s=n.length-1,g.nodeIdCompat&&w.test(n[s])&&(n[s]=n[s].replace(w,"")),n=d.slice(0,d.length-1).concat(n),l=0;l<n.length;l+=1)if(a=n[l],"."===a)n.splice(l,1),l-=1;else if(".."===a){if(1===l&&(".."===n[2]||".."===n[0]))break;l>0&&(n.splice(l-1,2),l-=2)}n=n.join("/")}else 0===n.indexOf("./")&&(n=n.substring(2));if((d||b)&&h){for(t=n.split("/"),l=t.length;l>0;l-=1){if(r=t.slice(0,l).join("/"),d)for(p=d.length;p>0;p-=1)if(i=h[d.slice(0,p).join("/")],i&&(i=i[r])){o=i,u=l;break}if(o)break;!c&&b&&b[r]&&(c=b[r],f=l)}!o&&c&&(o=c,u=f),o&&(t.splice(0,u,o),n=t.join("/"))}return n}function s(n,e){return function(){var t=x.call(arguments,0);return"string"!=typeof t[0]&&1===t.length&&t.push(null),d.apply(r,t.concat([n,e]))}}function u(n){return function(e){return o(e,n)}}function c(n){return function(e){m[n]=e}}function f(n){if(i(_,n)){var e=_[n];delete _[n],v[n]=!0,a.apply(r,e)}if(!i(m,n)&&!i(v,n))throw new Error("No "+n);return m[n]}function l(n){var e,t=n?n.indexOf("!"):-1;return t>-1&&(e=n.substring(0,t),n=n.substring(t+1,n.length)),[e,n]}function p(n){return function(){return g&&g.config&&g.config[n]||{}}}var a,d,h,b,m={},_={},g={},v={},y=Object.prototype.hasOwnProperty,x=[].slice,w=/\.js$/;h=function(n,e){var t,r=l(n),i=r[0];return n=r[1],i&&(i=o(i,e),t=f(i)),i?n=t&&t.normalize?t.normalize(n,u(e)):o(n,e):(n=o(n,e),r=l(n),i=r[0],n=r[1],i&&(t=f(i))),{f:i?i+"!"+n:n,n:n,pr:i,p:t}},b={require:function(n){return s(n)},exports:function(n){var e=m[n];return"undefined"!=typeof e?e:m[n]={}},module:function(n){return{id:n,uri:"",exports:m[n],config:p(n)}}},a=function(n,e,t,o){var u,l,p,a,d,g,y=[],x=typeof t;if(o=o||n,"undefined"===x||"function"===x){for(e=!e.length&&t.length?["require","exports","module"]:e,d=0;d<e.length;d+=1)if(a=h(e[d],o),l=a.f,"require"===l)y[d]=b.require(n);else if("exports"===l)y[d]=b.exports(n),g=!0;else if("module"===l)u=y[d]=b.module(n);else if(i(m,l)||i(_,l)||i(v,l))y[d]=f(l);else{if(!a.p)throw new Error(n+" missing "+l);a.p.load(a.n,s(o,!0),c(l),{}),y[d]=m[l]}p=t?t.apply(m[n],y):void 0,n&&(u&&u.exports!==r&&u.exports!==m[n]?m[n]=u.exports:p===r&&g||(m[n]=p))}else n&&(m[n]=t)},n=e=d=function(n,e,t,i,o){if("string"==typeof n)return b[n]?b[n](e):f(h(n,e).f);if(!n.splice){if(g=n,g.deps&&d(g.deps,g.callback),!e)return;e.splice?(n=e,e=t,t=null):n=r}return e=e||function(){},"function"==typeof t&&(t=i,i=o),i?a(r,n,e,t):setTimeout(function(){a(r,n,e,t)},4),d},d.config=function(n){return d(n)},n._defined=m,t=function(n,e,t){if("string"!=typeof n)throw new Error("See almond README: incorrect module build, no module name");e.splice||(t=e,e=[]),i(m,n)||i(_,n)||(_[n]=[n,e,t])},t.amd={jQuery:!0}}(),t("../../bower_components/almond/almond",function(){}),t("element",[],function(){var n=function(){};return n.prototype={_constructor:function(){},publish:function(n,e){this._component.publish(this._id+"."+n,e)}},n}),t("component",["element"],function(n){var e=function(n){this.__app__=n,this.subscribers={}};return e.prototype={add:function(e,t,r){r=r||n;var i=function(){};i.prototype=new r,i.prototype._id=e,i.prototype._component=this,i.prototype.controllers=this.__app__.controllers,i.prototype.models=this.__app__.models,i.prototype.views=this.__app__.views;for(var o in t)i.prototype[o]=t[o];return this[e]=new i,this[e]._constructor(),this[e]},call:function(n,e){var t;return null!==(t=/^(.*?)\.(.*)$/.exec(n))?this[t[1]][t[2]](e):null},publish:function(n,e){e=e||{};for(var t,r=/\.*([^.]+)\.*/g,i=this.subscribers;null!==(t=r.exec(n))&&i[t[1]];)if(t.index===r.lastIndex&&r.lastIndex++,i=i[t[1]],i._subscribers)for(var o=0;o<i._subscribers.length;o++)i._subscribers[o].callback.call(i._subscribers[o].scope,e);return this},subscribe:function(n,e,t){for(var r,i=/\.*([^.]+)\.*/g,o=this.subscribers;null!==(r=i.exec(n));)r.index===i.lastIndex&&i.lastIndex++,o[r[1]]=o[r[1]]||{},o=o[r[1]];o._subscribers=o._subscribers||[],o._subscribers.push({context:n,scope:e,callback:t})}},e}),t("micromvc",["component"],function(n){var e=function(){this.controllers=new n(this),this.models=new n(this),this.views=new n(this)};return e}),e("micromvc")});